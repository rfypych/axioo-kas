<%- include('partials/header') %>

<div class="container-fluid" style="margin-top: 56px;">
    <div class="row">
        <% if (user) { %>
            <%- include('partials/sidebar') %>
            <div class="col-lg-10">
        <% } else { %>
            <div class="col-12">
        <% } %>
            <div class="main-content">
                <div class="row justify-content-center">
                    <div class="col-md-8 col-lg-6">
                        <div class="card">
                            <div class="card-body text-center py-5">
                                <div class="mb-4">
                                    <% if (title && title.includes('404')) { %>
                                        <i class="bi bi-exclamation-triangle text-warning" style="font-size: 4rem;"></i>
                                        <h1 class="display-4 text-warning">404</h1>
                                    <% } else if (title && title.includes('403')) { %>
                                        <i class="bi bi-shield-exclamation text-danger" style="font-size: 4rem;"></i>
                                        <h1 class="display-4 text-danger">403</h1>
                                    <% } else { %>
                                        <i class="bi bi-exclamation-circle text-danger" style="font-size: 4rem;"></i>
                                        <h1 class="display-4 text-danger">Error</h1>
                                    <% } %>
                                </div>
                                
                                <h2 class="h4 mb-3">
                                    <% if (title && title.includes('404')) { %>
                                        Halaman Tidak Ditemukan
                                    <% } else if (title && title.includes('403')) { %>
                                        Akses Ditolak
                                    <% } else { %>
                                        Terjadi Kesalahan
                                    <% } %>
                                </h2>
                                
                                <p class="text-muted mb-4">
                                    <%= message || 'Terjadi kesalahan yang tidak terduga' %>
                                </p>
                                
                                <% if (process.env.NODE_ENV === 'development' && error && error !== 'Not Found' && error !== 'Forbidden') { %>
                                    <div class="alert alert-danger text-start">
                                        <h6>Error Details (Development Mode):</h6>
                                        <pre class="mb-0"><%= error %></pre>
                                    </div>
                                <% } %>
                                
                                <div class="d-flex gap-2 justify-content-center">
                                    <button onclick="history.back()" class="btn btn-secondary">
                                        <i class="bi bi-arrow-left"></i>
                                        Kembali
                                    </button>
                                    
                                    <% if (user) { %>
                                        <a href="/dashboard" class="btn btn-primary">
                                            <i class="bi bi-house"></i>
                                            Dashboard
                                        </a>
                                    <% } else { %>
                                        <a href="/login" class="btn btn-primary">
                                            <i class="bi bi-box-arrow-in-right"></i>
                                            Login
                                        </a>
                                    <% } %>
                                </div>
                                
                                <hr class="my-4">
                                
                                <div class="row text-center">
                                    <div class="col-md-4">
                                        <i class="bi bi-speedometer2 text-primary fs-3"></i>
                                        <h6 class="mt-2">Dashboard</h6>
                                        <p class="small text-muted">Lihat statistik kas</p>
                                    </div>
                                    <div class="col-md-4">
                                        <i class="bi bi-receipt text-success fs-3"></i>
                                        <h6 class="mt-2">Transaksi</h6>
                                        <p class="small text-muted">Kelola pemasukan & pengeluaran</p>
                                    </div>
                                    <div class="col-md-4">
                                        <i class="bi bi-people text-info fs-3"></i>
                                        <h6 class="mt-2">Siswa</h6>
                                        <p class="small text-muted">Data siswa & iuran</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <% if (title && title.includes('404')) { %>
                            <div class="card mt-4">
                                <div class="card-header">
                                    <h5 class="mb-0">
                                        <i class="bi bi-question-circle"></i>
                                        Bantuan
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <p class="mb-3">Halaman yang Anda cari mungkin:</p>
                                    <ul class="list-unstyled">
                                        <li><i class="bi bi-check text-success"></i> Telah dipindahkan ke lokasi lain</li>
                                        <li><i class="bi bi-check text-success"></i> URL yang diketik salah</li>
                                        <li><i class="bi bi-check text-success"></i> Memerlukan login terlebih dahulu</li>
                                        <li><i class="bi bi-check text-success"></i> Sedang dalam maintenance</li>
                                    </ul>
                                    
                                    <div class="mt-3">
                                        <h6>Halaman yang tersedia:</h6>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <ul class="list-unstyled small">
                                                    <li><a href="/dashboard" class="text-decoration-none">Dashboard</a></li>
                                                    <li><a href="/transactions" class="text-decoration-none">Transaksi</a></li>
                                                    <li><a href="/students" class="text-decoration-none">Data Siswa</a></li>
                                                </ul>
                                            </div>
                                            <div class="col-md-6">
                                                <ul class="list-unstyled small">
                                                    <li><a href="/weekly-payments" class="text-decoration-none">Iuran Mingguan</a></li>
                                                    <li><a href="/reports" class="text-decoration-none">Laporan</a></li>
                                                    <li><a href="/admin" class="text-decoration-none">Admin Panel</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <% } %>
                        
                        <% if (title && title.includes('403')) { %>
                            <div class="card mt-4">
                                <div class="card-header">
                                    <h5 class="mb-0">
                                        <i class="bi bi-info-circle"></i>
                                        Informasi Akses
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <p>Halaman ini memerlukan hak akses khusus:</p>
                                    <ul>
                                        <li>Login sebagai administrator</li>
                                        <li>Memiliki role yang sesuai</li>
                                        <li>Session yang masih aktif</li>
                                    </ul>
                                    
                                    <div class="alert alert-info">
                                        <i class="bi bi-lightbulb"></i>
                                        <strong>Tips:</strong> Pastikan Anda sudah login dengan akun yang memiliki hak akses yang sesuai.
                                    </div>
                                </div>
                            </div>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<%- include('partials/footer') %>
